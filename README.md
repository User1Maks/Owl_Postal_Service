# Owl_Postal_Service

### Описание-проекта
 Проект предназначен для отправки сообщений от пользователей сервиса клиентам с помощью функционала рассылки. 

С помощью сервиса пользователи могут создать сообщение для рассылки, выбрать клиентов для отправки, указывать дату и время отправки, а также ее периодичность.

На главной странице отображается:
- 3 случайные статьи;
- общее количество рассылок;
- количество активных рассылок;
- количество уникальных клиентов.

Регистрация новых пользователей происходит после подтверждения почтового ящика.

 В проекте реализован функционал менеджера:
- Может просматривать любые рассылки.
- Может просматривать список пользователей сервиса.
- Может блокировать пользователей сервиса.
- Может отключать рассылки.
- Не может редактировать рассылки.
- Не может управлять списком рассылок.
- Не может изменять рассылки и сообщения.

В проекте есть фикстуры с данными:

- data_mailing.json - в нем хранятся данные из приложения mailing (клиенты, сообщения, рассылки, попытки отправки рассылки).
- data_users.json - данные из приложения users (пользователи сервиса).
- forbidden_words.json - список запретных для создания сообщений и рассылок слов.
- groups.json - список групп сервиса с их правами.
- initial_data.json - данные всего проекта.


При запуске проекта автоматически запустится django-apscheduler из файла mailing/apps.py, там отработает функция ready(). 

----------------------------------------------------------------
### Использование

Для запуска проекта настройте виртуальное окружение и установите все зависимости к проекту. Запустите брокер redis для кеширования командой: 
```commandline
redis-server
```
Заполните файл `.env` по примеру `.env sample`.


Запустите сервер командой:
```commandline
python manage.py runserver
```

Для заполнения БД начальными данными введите команды:
```commandline
python manage.py migrate
```
```commandline
python manage.py loaddata initial_data.json
```

Чтобы создать суперпользователя, используйте команду:
```commandline
python manage.py csu
```

Для того чтобы запустить скрипт из командной строки, введите команду:
```commandline
python manage.py send_mail
```


----------------------------------------------------------------